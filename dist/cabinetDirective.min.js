!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.cabinetDirective=t():e.cabinetDirective=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e,t){var n=angular.module(e),r=new a(t),o=r.directiveNames;n.directive(o.cabinet,function(){return i(r)}),n.directive(o.drawerTrigger,function(){return c(o,r.getDirectiveClass("drawerTrigger"))}),n.directive(o.drawerContents,["$parse",function(e){return u(o,r.getDirectiveClass("drawerContents"),e)}]),n.directive(o.drawerClass,["$parse",function(e){return d(o,e)}])}function i(e){function t(t){o.call(this,new a(e),t)}function n(t,n,r,i){n.addClass(e.getDirectiveClass("cabinet")),i.linkCompleted(t,r)}return t.prototype=o.prototype,{controller:["$timeout",t],link:n,require:e.directiveNames.cabinet,restrict:"A"}}function o(e,t){this[f]=new s(e,t)}function s(e,t){this.timeout=t,this.config=e,this.configListeners=[],this.drawers=[]}var a=n(1),c=n(5),u=n(3),d=n(2),p=n(4),f="_cabinetDirective";e.exports=r;var l=o.prototype;l.linkCompleted=function(e,t){var n=this[f];n.watchOptions(e,t)},l.getDrawerController=function(e){var t,n=this[f],r=n.getDrawerById(e);return t=r?r.controller:e?this.createDrawerController(e):n.drawers[n.drawers.length-1].controller},l.createDrawerController=function(e){var t=this[f],n=t.getDrawerById(e);return n||(n={id:e,controller:new p(this,t.drawers.length,t.timeout),isOpen:!1},t.drawers.push(n)),n.controller},l.openDrawer=function(e,t){var n=this[f];n.openDrawer(e,t)},l.addConfigListener=function(e){var t=this[f];t.configListeners.push(e)};var v=s.prototype;v.watchOptions=function(e,t){function n(e,t){var n=e===t;e=e?e:{},t=t?t:{};var i=n||e.openStates!==t.openStates,o=n||e.oneAlwaysOpen!==t.oneAlwaysOpen;r.config.copyOptions(e),i&&r.openDrawersById(r.config.openStates,!0),o&&r.config.oneAlwaysOpen&&0===r.openDrawerCount()&&r.openDrawer(0,!0),n=!1,r.notifyConfigListeners()}var r=this,i=r.config.directiveNames.cabinet;return t[i]?void e.$watchCollection(t[i],n):void n(r.config,r.config)},v.notifyConfigListeners=function(){for(var e=0;e<this.configListeners.length;e++)this.configListeners[e](this.config)},v.openDrawer=function(e,t){function n(e,t){return e.isOpen===t||(e.isOpen=t,e.controller.open(e.isOpen))?!0:(e.isOpen=!0,!1)}if(!(!t&&this.config.oneAlwaysOpen&&this.openDrawerCount()<=1)){if(t&&!this.config.allowMultipleOpen)for(var r=0;r<this.drawers.length;r++){var i=this.drawers[r];if(r!==e&&!n(i,!1))return}n(this.drawers[e],t)}},v.openDrawersById=function(e){for(var t=0;t<this.drawers.length;t++){var n=this.drawers[t];if(void 0!==n.id){var r=e[n.id];void 0!==r&&this.openDrawer(t,r)}}},v.getDrawerById=function(e){if(e)for(var t=this.drawers.length-1;t>=0;t--)if(this.drawers[t].id===e)return this.drawers[t];return null},v.openDrawerCount=function(){for(var e=0,t=0;t<this.drawers.length;t++)this.drawers[t].isOpen&&e++;return e}},function(e,t){"use strict";function n(e){this.openOnHover=!1,this.oneAlwaysOpen=!1,this.allowMultipleOpen=!1,this.openStates={},this.directiveClasses={},this.directiveNames={cabinet:"cabinet",drawerTrigger:"drawerTrigger",drawerContents:"drawerContents",drawerClass:"drawerClass"},e&&e.directiveNames&&angular.extend(this.directiveNames,e.directiveNames);var t=e&&e.directiveClasses;for(var n in this.directiveNames){var r,i=this.directiveNames[n];r=t&&e.directiveClasses[n]?e.directiveClasses[n]:this.snakeCase(i),this.directiveClasses[i]=r}e&&this.copyOptions(e)}var r=/[A-Z]/g;e.exports=n;var i=n.prototype;i.copyOptions=function(e){var t,n,r=["openOnHover","oneAlwaysOpen","allowMultipleOpen"];for(t=0;t<r.length;t++)n=r[t],void 0!==e[n]&&(this[n]=e[n]);void 0!==e.openStates&&(this.openStates=angular.extend({},e.openStates))},i.getDirectiveClass=function(e){var t=this.directiveNames[e];return this.directiveClasses[t]},i.snakeCase=function(e){return e.replace(r,function(e,t){return(t?"-":"")+e.toLowerCase()})}},function(e,t){"use strict";function n(e,t){function n(n,r,i,o){var s,a,c,u=t(i[e.drawerClass])(n);u.length>2&&(s=u.shift()),a=u.shift(),c=u.shift(),r.addClass(c),void 0!==s&&(s=s.toString());var d=o.getDrawerController(s);d.addOpenListener(function(e){e?(r.addClass(a),r.removeClass(c)):(r.removeClass(a),r.addClass(c))})}return{link:{pre:n},require:"^"+e.cabinet}}e.exports=n},function(e,t){"use strict";function n(e,t,n){function r(r,i,o,s){i.addClass(t);var a,c,u=n(o[e.drawerContents])(r);"function"==typeof u?c=u:"string"==typeof u||"number"==typeof u?a=u:"object"==typeof u&&(a=u[0],c=u[1]),void 0!==a&&(a=a.toString());var d=s.getDrawerController(a),p=t+"-open";d.addOpenListener(function(e){if(e)i.addClass(p),c&&c("open");else if(i.removeClass(p),c){var t=c("closed");return"boolean"!=typeof t||t||i.addClass(p),t}}),i.bind("mouseenter",function(){d.onMouseEnterContents()}),i.bind("mouseleave",function(){d.onMouseLeaveContents()})}return{link:{pre:r},require:"^"+e.cabinet}}e.exports=n},function(e,t){"use strict";function n(e,t,n){this[i]=new r(e,t,n)}function r(e,t,n){var r=this;r.index=t,r.cabinetCtrl=e,r.config={},r.isOpen=!1,r.openListeners=[],r.timeout=n,r.openTimeoutTask=void 0,r.requestedOpenState=null,r.isTimerDisabled=!1,e.addConfigListener(function(e){r.config=e})}var i="_drawerController";e.exports=n;var o=n.prototype;o.open=function(e){var t=this[i];return t.isOpen=e,t.notifyOpenListeners(t.isOpen)?!0:(t.isOpen=!0,!1)},o.isOpen=function(){var e=this[i];return e.isOpen},o.addOpenListener=function(e){var t=this[i];t.openListeners.push(e)},o.disableTimer=function(e){var t=this[i];t.isTimerDisabled=e},o.onMouseClick=function(){var e=this[i];e.requestOpen(!e.isOpen)},o.onMouseEnterTrigger=function(){var e=this[i];e.config.openOnHover&&e.requestOpen(!0)},o.onMouseLeaveTrigger=function(){var e=this[i];e.config.openOnHover&&e.requestOpen(!1)},o.onMouseEnterContents=function(){this.onMouseEnterTrigger()},o.onMouseLeaveContents=function(){this.onMouseLeaveTrigger()};var s=r.prototype;s.notifyOpenListeners=function(e){for(var t=0;t<this.openListeners.length;t++){var n=this.openListeners[t](e);if(!e&&"boolean"==typeof n&&!n){for(var r=0;t>r;r++)this.openListeners[r](!0);return!1}}return!0},s.requestOpen=function(e){function t(){n.cabinetCtrl.openDrawer(n.index,n.requestedOpenState),n.requestedOpenState=null}var n=this;if(null!==n.requestedOpenState){if(n.requestedOpenState===e)return}else if(n.isOpen===e)return;return n.requestedOpenState=e,n.isTimerDisabled?void t():(n.openTimeoutTask&&n.timeout.cancel(n.openTimeoutTask),n.openTimeoutTask=n.timeout(function(){},5),void n.openTimeoutTask.then(t))}},function(e,t){"use strict";function n(e,t){function n(){this.drawerCtrl=null}function r(n,r,i,o){var s=o[0],a=o[1];r.addClass(t);var c=i[e.drawerTrigger],u=a.createDrawerController(c),d=t+"-open";u.addOpenListener(function(e){e?r.addClass(d):r.removeClass(d)}),s.drawerCtrl=u,r.bind("mouseenter",function(){u.onMouseEnterTrigger()}),r.bind("mouseleave",function(){u.onMouseLeaveTrigger()}),r.bind("click",function(){u.onMouseClick()}),r.bind("keydown keypress",function(e){13===e.which&&u.onMouseClick()})}return{controller:n,link:{pre:r},require:[e.drawerTrigger,"^"+e.cabinet]}}e.exports=n}])});
