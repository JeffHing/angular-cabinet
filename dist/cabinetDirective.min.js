!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):"object"==typeof exports?exports.cabinetDirective=n():e.cabinetDirective=n()}(this,function(){return function(e){function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){"use strict";function r(e,n){var t=angular.module(e),r=new a(n),o=r.directiveNames;t.directive(o.cabinet,function(){return i(r)}),t.directive(o.drawerTrigger,function(){return u(o,r.getElementClass("drawerTrigger"))}),t.directive(o.drawerContents,["$parse",function(e){return c(o,r.getElementClass("drawerContents"),e)}]),t.directive(o.drawerClass,["$parse",function(e){return l(o,e)}])}function i(e){function n(n){o.call(this,new a(e),n)}function t(n,t,r,i){t.addClass(e.getElementClass("cabinet")),i.linkCompleted(n,r)}return n.prototype=o.prototype,{controller:["$timeout",n],link:t,require:e.directiveNames.cabinet,restrict:"A"}}function o(e,n){this[f]=new s(e,n)}function s(e,n){this.timeout=n,this.config=e,this.configListeners=[],this.drawers=[]}e.exports=r;var a=t(1),u=t(5),c=t(4),l=t(3),p=t(2),f="_model",d=o.prototype;d.linkCompleted=function(e,n){var t=this[f];t.watchOptions(e,n)},d.getDrawerController=function(e){var n,t=this[f],r=t.getDrawerById(e);return n=r?r.controller:e?this.createDrawerController(e):t.drawers[t.drawers.length-1].controller},d.createDrawerController=function(e){var n=this[f],t=n.getDrawerById(e);return t||(t={id:e,controller:new p(this,n.drawers.length,n.timeout),isOpen:!1},n.drawers.push(t)),t.controller},d.openDrawer=function(e,n){var t=this[f];t.openDrawer(e,n)},d.addConfigListener=function(e){var n=this[f];n.configListeners.push(e)};var v=s.prototype;v.watchOptions=function(e,n){function t(e,n){var t=e===n;e=e?e:{},n=n?n:{};var i=t||e.openStates!==n.openStates,o=t||e.oneAlwaysOpen!==n.oneAlwaysOpen;r.config.copyOptions(e),i&&r.openDrawersById(r.config.openStates,!0),o&&r.config.oneAlwaysOpen&&0===r.openDrawerCount()&&r.openDrawer(0,!0),t=!1,r.notifyConfigListeners()}var r=this,i=r.config.directiveNames.cabinet;return n[i]?void e.$watchCollection(n[i],t):void t(r.config,r.config)},v.notifyConfigListeners=function(){for(var e=0;e<this.configListeners.length;e++)this.configListeners[e](this.config)},v.openDrawer=function(e,n){function t(e,n){return e.isOpen===n||(e.isOpen=n,e.controller.open(e.isOpen))?!0:(e.isOpen=!0,!1)}if(!(!n&&this.config.oneAlwaysOpen&&this.openDrawerCount()<=1)){if(n&&!this.config.allowMultipleOpen)for(var r=0;r<this.drawers.length;r++){var i=this.drawers[r];if(r!==e&&!t(i,!1))return}t(this.drawers[e],n)}},v.openDrawersById=function(e){for(var n=0;n<this.drawers.length;n++){var t=this.drawers[n];if(void 0!==t.id){var r=e[t.id];void 0!==r&&this.openDrawer(n,r)}}},v.getDrawerById=function(e){if(e)for(var n=this.drawers.length-1;n>=0;n--)if(this.drawers[n].id===e)return this.drawers[n];return null},v.openDrawerCount=function(){for(var e=0,n=0;n<this.drawers.length;n++)this.drawers[n].isOpen&&e++;return e}},function(e,n){"use strict";function t(e){this.openOnHover=!1,this.oneAlwaysOpen=!1,this.allowMultipleOpen=!1,this.openStates={},this.elementClasses={},this.directiveNames={cabinet:"cabinet",drawerTrigger:"drawerTrigger",drawerContents:"drawerContents",drawerClass:"drawerClass"},e&&e.directiveNames&&angular.extend(this.directiveNames,e.directiveNames);for(var n in this.directiveNames){var t=this.directiveNames[n];this.elementClasses[t]=this.snakeCase(t)}e&&this.copyOptions(e)}e.exports=t;var r=/[A-Z]/g,i=t.prototype;i.copyOptions=function(e){var n,t,r=["openOnHover","oneAlwaysOpen","allowMultipleOpen"];for(n=0;n<r.length;n++)t=r[n],void 0!==e[t]&&(this[t]=e[t]);void 0!==e.openStates&&(this.openStates=angular.extend({},e.openStates))},i.getElementClass=function(e){var n=this.directiveNames[e];return this.elementClasses[n]},i.replaceElementClass=function(e,n,t){var r=this.elementClass(e);return r!==t&&(n.removeClass(t),n.addClass(r)),r},i.snakeCase=function(e){return e.replace(r,function(e,n){return(n?"-":"")+e.toLowerCase()})}},function(e,n){"use strict";function t(e,n,t){this[i]=new r(e,n,t)}function r(e,n,t){var r=this;r.index=n,r.cabinetCtrl=e,r.config={},r.isOpen=!1,r.openListeners=[],r.timeout=t,r.openTimeoutTask=void 0,r.requestedOpenState=null,r.isTimerDisabled=!1,e.addConfigListener(function(e){r.config=e})}e.exports=t;var i="_drawerController",o=t.prototype;o.open=function(e){var n=this[i];return n.isOpen=e,n.notifyOpenListeners(n.isOpen)?!0:(n.isOpen=!0,!1)},o.isOpen=function(){var e=this[i];return e.isOpen},o.addOpenListener=function(e){var n=this[i];n.openListeners.push(e)},o.disableTimer=function(e){var n=this[i];n.isTimerDisabled=e},o.onMouseClick=function(){var e=this[i];e.requestOpen(!e.isOpen)},o.onMouseEnterTrigger=function(){var e=this[i];e.config.openOnHover&&e.requestOpen(!0)},o.onMouseLeaveTrigger=function(){var e=this[i];e.config.openOnHover&&e.requestOpen(!1)},o.onMouseEnterContents=function(){this.onMouseEnterTrigger()},o.onMouseLeaveContents=function(){this.onMouseLeaveTrigger()};var s=r.prototype;s.notifyOpenListeners=function(e){for(var n=0;n<this.openListeners.length;n++){var t=this.openListeners[n](e);if(!e&&"boolean"==typeof t&&!t){for(var r=0;n>r;r++)this.openListeners[r](!0);return!1}}return!0},s.requestOpen=function(e){function n(){t.cabinetCtrl.openDrawer(t.index,t.requestedOpenState),t.requestedOpenState=null}var t=this;if(null!==t.requestedOpenState){if(t.requestedOpenState===e)return}else if(t.isOpen===e)return;return t.requestedOpenState=e,t.isTimerDisabled?void n():(t.openTimeoutTask&&t.timeout.cancel(t.openTimeoutTask),t.openTimeoutTask=t.timeout(function(){},5),void t.openTimeoutTask.then(n))}},function(e,n){"use strict";function t(e,n){function t(t,r,i,o){var s,a,u,c=n(i[e.drawerClass])(t);c.length>2&&(s=c.shift()),a=c.shift(),u=c.shift(),r.addClass(u),void 0!==s&&(s=s.toString());var l=o.getDrawerController(s);l.addOpenListener(function(e){e?(r.addClass(a),r.removeClass(u)):(r.removeClass(a),r.addClass(u))})}return{link:{pre:t},require:"^"+e.cabinet}}e.exports=t},function(e,n){"use strict";function t(e,n,t){function r(r,i,o,s){i.addClass(n);var a,u,c=t(o[e.drawerContents])(r);"function"==typeof c?u=c:"string"==typeof c||"number"==typeof c?a=c:"object"==typeof c&&(a=c[0],u=c[1]),void 0!==a&&(a=a.toString());var l=s.getDrawerController(a),p=n+"-open";l.addOpenListener(function(e){if(e)i.addClass(p),u&&u("open");else if(i.removeClass(p),u){var n=u("closed");return"boolean"!=typeof n||n||i.addClass(p),n}}),i.bind("mouseenter",function(){l.onMouseEnterContents()}),i.bind("mouseleave",function(){l.onMouseLeaveContents()})}return{link:{pre:r},require:"^"+e.cabinet}}e.exports=t},function(e,n){"use strict";function t(e,n){function t(){this.drawerCtrl=null}function r(t,r,i,o){var s=o[0],a=o[1];r.addClass(n);var u=i[e.drawerTrigger],c=a.createDrawerController(u),l=n+"-open";c.addOpenListener(function(e){e?r.addClass(l):r.removeClass(l)}),s.drawerCtrl=c,r.bind("mouseenter",function(){c.onMouseEnterTrigger()}),r.bind("mouseleave",function(){c.onMouseLeaveTrigger()}),r.bind("click",function(){c.onMouseClick()}),r.bind("keydown keypress",function(e){13===e.which&&c.onMouseClick()})}return{controller:t,link:{pre:r},require:[e.drawerTrigger,"^"+e.cabinet]}}e.exports=t}])});
